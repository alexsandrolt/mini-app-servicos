<!DOCTYPE html>
<html lang="pt-br">

<head>
  <meta charset="UTF-8">
  <title>Avaliar Prestador</title>
  <link rel="stylesheet" href="avaliar.css">
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
  <script src="main.js" defer></script>
</head>

<body>
  <div class="app-container">
    <h1>Avaliar Prestador</h1>

    <input type="text" id="prestadorId" placeholder="ID do prestador"><br>
    <input type="number" id="nota" placeholder="Nota (0 a 5)" min="0" max="5"><br>

    <button class="btn-avaliar" onclick="avaliar()">Enviar Avaliação</button>

    <button class="btn-proximo" onclick="window.location.href='agendar.html'">
      Próximo →
    </button>
  </div>

  <script>
    async function avaliar() {
      const id = document.getElementById("prestadorId").value;
      const nota = parseFloat(document.getElementById("nota").value);

      const { data, error } = await supabase
        .from("users")
        .update({ nota })
        .eq("id", id);

      if (error) alert("Erro ao avaliar");
      else alert("Avaliação enviada!");
    }
  </script>
</body>

</html>